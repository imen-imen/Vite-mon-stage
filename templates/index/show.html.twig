{% extends 'base.html.twig' %}

{% block title %}{{ offer.title }} - VITE MON STAGE!{% endblock %}

{% block content %}
    <h1>{{ offer.title }}</h1>

    <p><strong>Description :</strong></p>
    <p>{{ offer.description }}</p>

    <p><strong>Localisation :</strong> {{ offer.localisation }}</p>

    <p><strong>Date de début :</strong> {{ offer.startDate|date('d/m/Y') }}</p>

    <p><strong>Durée :</strong> {{ offer.duration }} jours</p>

    <p><strong>Publié le :</strong> {{ offer.createdAt|date('d/m/Y') }}</p>

    {% if offer.domain is defined and offer.domain is not null %}
        <p><strong>Domaine :</strong> {{ offer.domain.name }}</p>
    {% endif %}

    <hr>

    {% if app.user %}
        {# ✅ Utilisateur connecté : bouton Postuler #}
        <a href="{{ path('app_candidacy_new', {id: offer.id}) }}" class="btn btn-success">
            Postuler à cette offre
        </a>
    {% else %}
        {# ❌ Utilisateur non connecté : message + boutons #}
        <div class="alert alert-warning">
            <p>Pour postuler à cette offre de stage, merci de vous connecter !</p>
            <a href="{{ path('app_login') }}" class="btn btn-primary">Connexion</a>
            <a href="{{ path('app_register') }}" class="btn btn-primary">Inscription</a>
        </div>
    {% endif %}

    <br><br>

    <a href="{{ path('app_index') }}">← Retour à la liste des offres</a>

{% endblock %}
